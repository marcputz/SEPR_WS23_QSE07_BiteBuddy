<div *ngIf="error" class="bb-message-box bb-message-box-error">
  {{ errorMessage }}
</div>

<div style="padding: 0.8rem;">
  <div class="bb-settings-box">
    <header>Change Email</header>
    <form class="form" [formGroup]="settingsForm" (ngSubmit)="updateUserSettings()">

      <div class="form-group">
        <label for="inputEmail">Email:</label>
        <input type="email" name="email" formControlName="email"
               class="bb-input-textfield"
               [class.bb-input-textfield-error]="submitted && settingsForm.controls.email.errors"
               id="inputEmail"
               placeholder="Enter new Email">

        <div *ngIf="submitted && settingsForm.controls.email.errors" class="error">
          <small class="form-text text-danger" *ngIf="settingsForm.controls.email.errors.required">
            Email is required.
          </small>
          <small class="form-text text-danger" *ngIf="settingsForm.controls.email.errors.changed">
            Email was not changed.
          </small>
          <small class="form-text text-danger" *ngIf="settingsForm.controls.email.errors.email">
            Not a valid email.
          </small>
          <small class="form-text text-danger" *ngIf="settingsForm.controls.email.errors.valid">
            Email already in use
          </small>
        </div>
      </div>


      <div class="form-group">
        <label for="currentPassword">Password:</label>
        <input type="password" name="currentPassword" formControlName="currentPassword"
               class="bb-input-textfield"
               [class.bb-input-textfield-error]="submitted && settingsForm.controls.currentPassword.errors"
               id="currentPassword"
               placeholder="Enter Password">
        <div *ngIf="submitted && settingsForm.controls.currentPassword.errors" class="error">
          <small class="form-text text-danger" *ngIf="settingsForm.controls.currentPassword.errors.required">
            Password is required
          </small>
          <small class="form-text text-danger" *ngIf="settingsForm.controls.currentPassword.errors.minlength">
            Password has to be at least 8 characters long
          </small>
          <small class="form-text text-danger" *ngIf="settingsForm.controls.currentPassword.errors.valid">
            Password is not correct
          </small>
        </div>
      </div>

      <button type="button" (click)="updateUserSettings()" class="bb-button">Save</button>

    </form>
  </div>
</div>
